### :book: RecyclerView –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–µ–≥–æ Android-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

–î–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è –±—ã–ª–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞ [coder-chekunkov](https://github.com/coder-chekunkov) –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö Android-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –¢–µ–º–∞: RecyclerView. <br/>
[–°—Å—ã–ª–∫–∞](https://habr.com/ru/sandbox/181814/) –Ω–∞ —Å—Ç–∞—Ç—å—é –Ω–∞ Habr.


<p align="center">
 <img alt="GIF" src="https://github.com/coder-chekunkov/RecyclerView-Article/blob/main/wiki_images/001.jpg" width="220"/>
 <img alt="GIF" src="https://github.com/coder-chekunkov/RecyclerView-Article/blob/main/wiki_images/002.jpg" width="220"/>
 <img alt="GIF" src="https://github.com/coder-chekunkov/RecyclerView-Article/blob/main/wiki_images/003.gif" width="220"/> <br/>
</p>

---

–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, –¥–æ—Ä–æ–≥–æ–π —á–∏—Ç–∞—Ç–µ–ª—å. –ö–∞–∂–¥—ã–π Android-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ç–∞–ª–∫–∏–≤–∞–ª—Å—è —Å –∑–∞–¥–∞—á–µ–π, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –∫–∞–∫–æ–π-—Ç–æ —Å–ø–∏—Å–æ–∫, –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –î–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è –ø–æ–º–æ–∂–µ—Ç –Ω–æ–≤–∏—á–∫—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å —Ç–∞–∫–∏–º –æ—á–µ–Ω—å –≤–∞–∂–Ω—ã–º –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º, –∫–∞–∫ RecyclerView.

–í —Å—Ç–∞—Ç—å–µ –±—É–¥–µ—Ç —Ä–∞—Å—Å–∫–∞–∑–∞–Ω–æ –æ —Ç–æ–º, –ø–æ—á–µ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–Ω–æ RecyclerView, –æ–ø–∏—Å–∞–Ω—ã –µ–≥–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Ç–∞–∫–∂–µ –±—É–¥–µ—Ç —Ä–∞–∑–æ–±—Ä–∞–Ω –±–∞–∑–æ–≤—ã–π, –Ω–µ –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–π –ø—Ä–∏–º–µ—Ä.

–°—Ç–∞—Ç—å—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ –≤ Android.

#### ListView –∏–ª–∏ RecyclerView?

–î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞–∫–æ–≥–æ-—Ç–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º–æ–≥–æ —Å–ø–∏—Å–∫–∞ —É Android —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –¥–≤–∞ –ø—É—Ç–∏ - [ListView](https://developer.android.com/reference/android/widget/ListView) –∏ [RecyclerView](https://developer.android.com/reference/kotlin/androidx/recyclerview/widget/RecyclerView).

–ü–µ—Ä–≤—ã–π –≤–∏–¥–∂–µ—Ç –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–µ–Ω –∏ –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç. –ù–æ, –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é, –∏–º–µ–µ—Ç –º–Ω–æ–≥–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, ListView –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫.

–í —Å–≤–æ—é –∂–µ –æ—á–µ—Ä–µ–¥—å RecyclerView "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–∞, —á–µ–º ListView. –ï—Å–ª–∏ –∫—Ä–∞—Ç–∫–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑–æ–≤–∞—Ç—å RecyclerView, —Ç–æ –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —ç—Ç–æ —Å–ø–∏—Å–æ–∫ –Ω–∞ —Å—Ç–µ—Ä–æ–∏–¥–∞—Ö.

RecyclerView —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º: –Ω–∞ —ç–∫—Ä–∞–Ω–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤–∏–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞; –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ —Å–ø–∏—Å–∫–∞ –≤–µ—Ä—Ö–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç —É—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —ç–∫—Ä–∞–Ω–∞ –∏ –æ—á–∏—â–∞–µ—Ç—Å—è, –∞ –ø–æ—Å–ª–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤–Ω–∏–∑ —ç–∫—Ä–∞–Ω–∞ –∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã RecyclerView.

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã RecyckerView –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- `RecyclerView`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –º–∞–∫–µ—Ç –Ω–∞—à–µ–≥–æ Activity;
- `Adapter`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å–æ —Å–ø–∏—Å–∫–æ–º;
- `ViewHolder`, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É–∂–∏—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ —è–≤–ª—è–µ—Ç—Å—è —Å–≤–æ–µ–æ–±—Ä–∞–∑–Ω—ã–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –≤—Ö–æ–¥—è—â–∏—Ö –≤ —Å–ø–∏—Å–æ–∫;
- `ItemDecorator`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å –≤–µ—Å—å –¥–µ–∫–æ—Ä;
- `ItemAnimator`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∞–Ω–∏–º–∞—Ü–∏—é —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π;
- `DiffUtil`, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É–∂–∏—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π.

#### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä.

–í –∫–∞—á–µ—Å—Ç–≤–µ –Ω–µ —Å–ª–æ–∂–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, —Å–æ–∑–¥–∞–¥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ —Å–ø–∏—Å–∫–æ–º, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –æ –ª—é–¥—è—Ö. –ö–∞–∂–¥—ã–π —á–µ–ª–æ–≤–µ–∫ –±—É–¥–µ—Ç –∏–º–µ—Ç—å –∏–º—è, –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ –Ω–∏–º (–ø–æ–∫–∞–∑–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä, —É–¥–∞–ª–∏—Ç—å, –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑, –ª–∞–π–∫–Ω—É—Ç—å).

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–º–µ—Ä–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ —è–∑—ã–∫–µ Kotlin. –¢–∞–∫–∂–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [Glide](https://github.com/bumptech/glide) –∏ [Faker](https://github.com/DiUS/java-faker), –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏–∫–∞–∫ –Ω–µ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ RecyclerView.

–í –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å **—É–∫–∞–∂–µ–º –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, –≤ —Ñ–∞–π–ª —Å–±–æ—Ä–∫–∏ `build.gradle` –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```groovy
    implementation 'androidx.recyclerview:recyclerview:1.2.1'
    implementation 'com.github.javafaker:javafaker:1.0.2'
    implementation 'com.github.bumptech.glide:glide:4.14.2'
```

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏—è—Ö AndroidStudio –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É RecyclerView. –î–æ—Å—Ç—É–ø–µ–Ω –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ Material.*

–ò –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ **–ø–æ–¥–∫–ª—é—á–∏—Ç—å** [ViewBinding](https://developer.android.com/topic/libraries/view-binding) –≤ —Ñ–∞–π–ª–µ —Å–±–æ—Ä–∫–∏ `build.gradle` –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```groovy
buildFeatures {
        viewBinding = true
}
```

–¢–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å **—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ** –Ω–∞ –¥–æ—Å—Ç—É–ø –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –≤ —Ñ–∞–π–ª–µ `AndroidManifest.xml` (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π Glide):

```xml
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
```

–ü–æ—Å–ª–µ **—Å–æ–∑–¥–∞–¥–∏–º –º–∞–∫–µ—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã**: –ø–µ—Ä–≤—ã–π –¥–ª—è ActivityMain, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç RecyclerView, –≤—Ç–æ—Ä–æ–π –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ (—á–µ–ª–æ–≤–µ–∫).

*activity_main.xml*:

```xml
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/activityMain"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerView"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</FrameLayout>
```

*item_person.xml*

```xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="?selectableItemBackground"
    android:paddingStart="10dp"
    android:paddingTop="5dp"
    android:paddingEnd="10dp"
    android:paddingBottom="5dp">

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:src="@drawable/ic_person"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

    <TextView
        android:id="@+id/nameTextView"
        style="@style/TextAppearance.AppCompat.Body2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginStart="15dp"
        app:layout_constraintStart_toEndOf="@id/imageView"
        app:layout_constraintTop_toTopOf="parent" />

    <TextView
        android:id="@+id/companyTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginStart="15dp"
        app:layout_constraintStart_toEndOf="@id/imageView"
        app:layout_constraintTop_toBottomOf="@id/nameTextView" />

    <ImageView
        android:id="@+id/likedImageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginEnd="15dp"
        android:src="@drawable/ic_like"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toStartOf="@id/more"
        app:layout_constraintTop_toTopOf="parent" />

    <ImageView
        android:id="@+id/more"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_more"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout>
```

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –±—ã–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã, –≤—Å–µ –º–∞–∫–µ—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ–ª—É—á–µ–Ω—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ **—Å–æ–∑–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –ª—é–¥—è—Ö** (–≤ –Ω–∞—Å—Ç–æ—è—â–µ–º, –±–æ–µ–≤–æ–º –ø—Ä–∏–º–µ—Ä–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å —Å–µ—Ä–≤–µ—Ä–∞, –Ω–æ –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –º—ã —Å–æ–∑–¥–∞–¥–∏–º –∏—Ö —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ). –î–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–¥–∏–º –∫–ª–∞—Å—Å *PersonService* –∏ data-class *Person*:

```kotlin
data class Person(
    val id: Long, // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    val name: String, // –ò–º—è —á–µ–ª–æ–≤–µ–∫–∞
    val companyName: String, // –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–∏–∏
    val photo: String, // –°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ —á–µ–ª–æ–≤–µ–∫–∞
    val isLiked: Boolean // –ë—ã–ª –ª–∏ –ª–∞–π–∫–Ω—É—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
)
```

```kotlin
class PersonService {

    private var persons = mutableListOf<Person>() // –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

    init {
        val faker = Faker.instance() // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

        persons = (1..50).map {
            Person(
                id = it.toLong(),
                name = faker.name().fullName(),
                companyName = faker.company().name(),
                photo = IMAGES[it % IMAGES.size],
                isLiked = false
            )
        }.toMutableList()
    }

    companion object {
        private val IMAGES = mutableListOf(
            "https://images.unsplash.com/photo-1600267185393-e158a98703de?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=600&ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0MDE0NjQ0&ixlib=rb-1.2.1&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=800",
            "https://images.unsplash.com/photo-1579710039144-85d6bdffddc9?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=600&ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0MDE0Njk1&ixlib=rb-1.2.1&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=800",
            "https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=600&ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0MDE0ODE0&ixlib=rb-1.2.1&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=800",
            "https://images.unsplash.com/photo-1620252655460-080dbec533ca?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=600&ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0MDE0NzQ1&ixlib=rb-1.2.1&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=800",
            "https://images.unsplash.com/photo-1613679074971-91fc27180061?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=600&ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0MDE0NzUz&ixlib=rb-1.2.1&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=800",
            "https://images.unsplash.com/photo-1485795959911-ea5ebf41b6ae?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=600&ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0MDE0NzU4&ixlib=rb-1.2.1&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=800",
            "https://images.unsplash.com/photo-1545996124-0501ebae84d0?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=600&ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0MDE0NzY1&ixlib=rb-1.2.1&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=800",
            "https://images.unsplash.com/flagged/photo-1568225061049-70fb3006b5be?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=600&ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0MDE0Nzcy&ixlib=rb-1.2.1&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=800",
            "https://images.unsplash.com/photo-1567186937675-a5131c8a89ea?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=600&ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0MDE0ODYx&ixlib=rb-1.2.1&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=800",
            "https://images.unsplash.com/photo-1546456073-92b9f0a8d413?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=600&ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0MDE0ODY1&ixlib=rb-1.2.1&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=800"
        )
    }
}
```

–í –∫–ª–∞—Å—Å–µ PersonService —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–∏—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–π –º—ã –∑–∞–ø–æ–ª–Ω—è–µ–º –≤ `init` (initializers blocks), –∏ –ª–∏—Å—Ç —Å—Å—ã–ª–æ–∫ –Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏.

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∫–ª–∞—Å—Å PersonService —Å–¥–µ–ª–∞—Ç—å `Singleton` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –î–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–¥–∏–º –∫–ª–∞—Å—Å *App*, –∏ —É–∫–∞–∂–µ–º –≤ –Ω–µ–º —Å–ª–µ–¥—É—é—â–µ–µ:

```kotlin
class App : Application() {
    val personService = PersonService()
}
```

–¢–µ–ø–µ—Ä—å **—Ä–µ–∞–ª–∏–∑—É–µ–º –∞–¥–∞–ø—Ç–µ—Ä** *PersonAdapter*, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏ —Å–≤—è–∑—ã–≤–∞—Ç—å –∏—Ö —Å–æ —Å–ø–∏—Å–∫–æ–º.

–î–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `RecyclerView.Adapter`, –∫–æ—Ç–æ—Ä–æ–º—É –Ω—É–∂–µ–Ω ViewHolder. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å *PersonViewHolder*, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å `RecyclerView.ViewHolder` –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–∞—à binding.

–¢–∞–∫–∂–µ PersonAdapter –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–∞–Ω–Ω—ã–µ, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –µ–º—É –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å. –î–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–¥–∏–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –∏ –ø–µ—Ä–µ–ø–∏—à–µ–º –µ–≥–æ —Å–µ—Ç—Ç–µ—Ä. –í –∏—Ç–æ–≥–µ –ø–æ–ª—É—á–∞–µ–º:

```kotlin
class PersonAdapter : RecyclerView.Adapter<PersonAdapter.PersonViewHolder>() {

    var data: List<Person> = emptyList()
        set(newValue) {
            field = newValue
            notifyDataSetChanged()
        }

    class PersonViewHolder(val binding: ItemPersonBinding) : RecyclerView.ViewHolder(binding.root)
}
```

–ù–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –∞–¥–∞–ø—Ç–µ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–∏–Ω–∏–º—É–º —Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ (AndroidStudio –ø–æ–¥—Å–∫–∞–∂–µ—Ç –Ω–∞–º).

–ú–µ—Ç–æ–¥ `getItemCount`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞—à–µ–≥–æ —Å–ø–∏—Å–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏; <br/>
–ú–µ—Ç–æ–¥ `onCreateViewHolder`, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ ViewHolder. –î–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è *parent* –∏ *viewType* (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤ —Å–ø–∏—Å–∫–µ –±—É–¥—É—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–∏—Å–∫–∞); <br/>
–ú–µ—Ç–æ–¥ `onBindViewHolder`, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –æ–±—ä–µ–∫—Ç–µ —Å–ø–∏—Å–∫–∞ (–∏–º—è —á–µ–ª–æ–≤–µ–∫–∞, –∫–æ–º–ø–∞–Ω–∏—è –∏ —Ç.–¥.):

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤ –∏ –∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—É—á–∞–µ–º:

```kotlin
    override fun getItemCount(): Int = data.size // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Å–ø–∏—Å–∫–µ –¥–∞–Ω–Ω—ã—Ö

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): PersonViewHolder {
        val inflater = LayoutInflater.from(parent.context)
        val binding = ItemPersonBinding.inflate(inflater, parent, false)

        return PersonViewHolder(binding)
    }

    override fun onBindViewHolder(holder: PersonViewHolder, position: Int) {
        val person = data[position] // –ü–æ–ª—É—á–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ –ø–æ–∑–∏—Ü–∏–∏
        val context = holder.itemView.context

        with(holder.binding) {
            val color = if (person.isLiked) R.color.red else R.color.grey // –¶–≤–µ—Ç "—Å–µ—Ä–¥—Ü–∞", –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã–ª –ª–∞–π–∫–Ω—É—Ç

            nameTextView.text = person.name // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            companyTextView.text = person.companyName // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            likedImageView.setColorFilter( // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ü–≤–µ—Ç–∞ "—Å–µ—Ä–¥—Ü–∞"
                ContextCompat.getColor(context, color),
                android.graphics.PorterDuff.Mode.SRC_IN
            )
            Glide.with(context).load(person.photo).circleCrop() // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Glide
                .error(R.drawable.ic_person) 
                .placeholder(R.drawable.ic_person).into(imageView)
        }
    }
```

–ù–∞ —ç—Ç–æ–º –Ω–∞—à –ø—Ä–æ—Å—Ç–æ–π –∞–¥–∞–ø—Ç–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≥–æ—Ç–æ–≤.

–¢–µ–ø–µ—Ä—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–≤–µ—Å–∏—Ç—å –Ω–∞ –Ω–∞—à RecyclerView —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∞–¥–∞–ø—Ç–µ—Ä –∏ LayoutManager. –î–ª—è —ç—Ç–æ–≥–æ –≤ –∫–ª–∞—Å—Å–µ MainActivity –ø—Ä–æ–ø–∏—à–µ–º —Å–ª–µ–¥—É—é—â–µ–µ:

```kotlin
class MainActivity : AppCompatActivity() {

    private lateinit var binding: ActivityMainBinding
    private lateinit var adapter: PersonAdapter // –û–±—ä–µ–∫—Ç Adapter
    private val personService: PersonService // –û–±—ä–µ–∫—Ç PersonService
        get() = (applicationContext as App).personService

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityMainBinding.inflate(layoutInflater)
        setContentView(binding.root)

        val manager = LinearLayoutManager(this) // LayoutManager
        adapter = PersonAdapter() // –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞
        adapter.data = personService.getPersons() // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏

        binding.recyclerView.layoutManager = manager // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ LayoutManager –¥–ª—è RecyclerView
        binding.recyclerView.adapter = adapter // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–∞ –¥–ª—è RecyclerView
    }
}
```

–ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏ –ø–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!

–ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –º–æ–∂–µ–º –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å, –Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –Ω–∏–º–∏ —É –Ω–∞—Å –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è. –ò—Å–ø—Ä–∞–≤–∏–º —ç—Ç–æ.

–í –∫–ª–∞—Å—Å–µ PersonService –¥–æ–±–∞–≤–∏–º —Ç—Ä–∏ –º–µ—Ç–æ–¥–∞:

- *likePerson* - –ª–∞–π–∫–∞–µ–º —á–µ–ª–æ–≤–µ–∫–∞;
- *removePerson* - —É–¥–∞–ª—è–µ–º —á–µ–ª–æ–≤–µ–∫–∞; 
- *movePerson* - –ø–µ—Ä–µ–º–µ—â–∞–µ–º —á–µ–ª–æ–≤–µ–∫–∞ (–ø—Ä–∏–Ω–∏–º–∞–µ—Ç —á–µ–ª–æ–≤–µ–∫–∞ –∏ –∫—É–¥–∞ –Ω–∞–¥–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å: "1" - –≤–Ω–∏–∑, "-1" - –≤–≤–µ—Ä—Ö).
  

```kotlin
    fun likePerson(person: Person) {
        val index = persons.indexOfFirst { it.id == person.id } // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å —á–µ–ª–æ–≤–µ–∫–∞ –≤ —Å–ø–∏—Å–∫–µ
        if (index == -1) return // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è, –µ—Å–ª–∏ –Ω–µ –Ω–∞—Ö–æ–¥–∏–º —Ç–∞–∫–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞

        persons = ArrayList(persons) // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫
        persons[index] = persons[index].copy(isLiked = !persons[index].isLiked) // –ú–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ "–ª–∞–π–∫–∞" –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–µ
    }

    fun removePerson(person: Person) {
        val index = persons.indexOfFirst { it.id == person.id } // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å —á–µ–ª–æ–≤–µ–∫–∞ –≤ —Å–ø–∏—Å–∫–µ
        if (index == -1) return // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è, –µ—Å–ª–∏ –Ω–µ –Ω–∞—Ö–æ–¥–∏–º —Ç–∞–∫–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞

        persons = ArrayList(persons) // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫
        persons.removeAt(index) // –£–¥–∞–ª—è–µ–º —á–µ–ª–æ–≤–µ–∫–∞
    }

    fun movePerson(person: Person, moveBy: Int) {
        val oldIndex = persons.indexOfFirst { it.id == person.id } // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å —á–µ–ª–æ–≤–µ–∫–∞ –≤ —Å–ø–∏—Å–∫–µ
        if (oldIndex == -1) return // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è, –µ—Å–ª–∏ –Ω–µ –Ω–∞—Ö–æ–¥–∏–º —Ç–∞–∫–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞

        val newIndex = oldIndex + moveBy // –í—ã—á–∏—Å–ª—è–µ–º –Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —á–µ–ª–æ–≤–µ–∫
        persons = ArrayList(persons) // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫
        Collections.swap(persons, oldIndex, newIndex) // –ú–µ–Ω—è–µ–º –º–µ—Å—Ç–∞–º–∏ –ª—é–¥–µ–π        
    }
```

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –º–µ—Ç–æ–¥—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ª—é–¥—å–º–∏, –≤ –∫–ª–∞—Å—Å–µ PersonService –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ **–æ–±—ä—è–≤–∏—Ç—å —Å–ª—É—à–∞—Ç–µ–ª—è**:

```kotlin
typealias PersonListener = (persons: List<Person>) -> Unit
```

–¢–∞–∫ –∂–µ **—Å–æ–∑–¥–∞–¥–∏–º** —Å–ø–∏—Å–æ–∫ —Å–ª—É—à–∞—Ç–µ–ª–µ–π, –¥–≤–∞ –º–µ—Ç–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å–ª—É—à–∞—Ç–µ–ª–µ–π, –∏ –æ–¥–∏–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç "—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è":

```kotlin
    private var listeners = mutableListOf<PersonListener>() // –í—Å–µ —Å–ª—É—à–∞—Ç–µ–ª–∏

    fun addListener(listener: PersonListener) {
        listeners.add(listener)
        listener.invoke(persons)
    }

    fun removeListener(listener: PersonListener) {
        listeners.remove(listener)
        listener.invoke(persons)
    }

    private fun notifyChanges() = listeners.forEach { it.invoke(persons) }
```

–ú–µ—Ç–æ–¥ *notifyChanges* –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–∑–≤–∞—Ç—å –≤ –º–µ—Ç–æ–¥–∞—Ö, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, —Ç–æ –µ—Å—Ç—å –≤ –º–µ—Ç–æ–¥–∞—Ö likePerson, removePerson –∏ movePerson.

–ù–∞ —ç—Ç–æ–º –Ω–∞—à —Å–µ—Ä–≤–∏—Å –ª—é–¥–µ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤. –ü–µ—Ä–µ–π–¥–µ–º –≤ PersonAdapter, –≤ –∫–æ—Ç–æ—Ä–æ–º **—Ä–µ–∞–ª–∏–∑—É–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π** –Ω–∞—à–∏—Ö –ª—é–¥–µ–π. –°–æ–∑–¥–∞–¥–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å *PersonActionListener*, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É —á–µ—Ç—ã—Ä–µ –º–µ—Ç–æ–¥–∞:

- *onPersonGetId* - –ø–æ–ª—É—á–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞;
- *onPersonLike* - —á–µ–ª–æ–≤–µ–∫ –±—ã–ª –ª–∞–π–∫–Ω—É—Ç;
- *onPersonRemove* - —É–¥–∞–ª–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞;
- *onPersonMove* - –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞.
  

```kotlin
interface PersonActionListener {
    fun onPersonGetId(person: Person)
    fun onPersonLike(person: Person)
    fun onPersonRemove(person: Person)
    fun onPersonMove(person: Person, moveBy: Int)
}
```

–ö–ª–∞—Å—Å PersonAdapter –≤–æ –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–∞—à –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –¢–∞–∫–∂–µ –¥–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å *OnClickListener*. –í –∏—Ç–æ–≥–µ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∫–ª–∞—Å—Å–∞ PersonAdaper –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```kotlin
class PersonAdapter(private val personActionListener: PersonActionListener) :
    RecyclerView.Adapter<PersonAdapter.PersonViewHolder>(), View.OnClickListener {
```

–¢–µ–ø–µ—Ä—å –≤ –∫–ª–∞—Å—Å–µ PersonAdapter –≤ –º–µ—Ç–æ–¥–µ onBindViewHolder –∫–ª–∞–¥—ë–º –≤ tag –∫–∞–∂–¥–æ–≥–æ view, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –Ω–∞–∂–∞—Ç–∏–µ, –Ω—É–∂–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞:

```kotlin
holder.itemView.tag = person
holder.binding.likedImageView.tag = person
holder.binding.more.tag = person
```

–¢–µ–ø–µ—Ä—å –≤ –º–µ—Ç–æ–¥–µ onCreateViewHolder –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—à–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏. –í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç–µ–ª—å –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞, –∫–Ω–æ–ø–∫—É more (—Ç—Ä–∏ —Ç–æ—á–∫–∏) –∏ likedImageView (—Å–µ—Ä–¥—Ü–µ):

```kotlin
binding.root.setOnClickListener(this)
binding.more.setOnClickListener(this)
binding.likedImageView.setOnClickListener(this)
```

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–¥–∏–º –º–µ—Ç–æ–¥ *showPopupMenu*, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç "—Ä–∏—Å–æ–≤–∞—Ç—å" –≤—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏, –∞ –∏–º–µ–Ω–Ω–æ: —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–≤–µ—Ä—Ö, –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–Ω–∏–∑:

```kotlin
    private fun showPopupMenu(view: View) {
        val popupMenu = PopupMenu(view.context, view)
        val person = view.tag as Person
        val position = data.indexOfFirst { it.id == person.id }

        popupMenu.menu.add(0, ID_MOVE_UP, Menu.NONE, "Up").apply {
            isEnabled = position > 0
        }
        popupMenu.menu.add(0, ID_MOVE_DOWN, Menu.NONE, "Down").apply {
            isEnabled = position < data.size - 1
        }
        popupMenu.menu.add(0, ID_REMOVE, Menu.NONE, "Remove")

        popupMenu.setOnMenuItemClickListener {
            when (it.itemId) {
                ID_MOVE_UP -> personActionListener.onPersonMove(person, -1)
                ID_MOVE_DOWN -> personActionListener.onPersonMove(person, 1)
                ID_REMOVE -> personActionListener.onPersonRemove(person)
            }
            return@setOnMenuItemClickListener true
        }

        popupMenu.show()
    }

    companion object {
        private const val ID_MOVE_UP = 1
        private const val ID_MOVE_DOWN = 2
        private const val ID_REMOVE = 3
    }
```

–í –º–µ—Ç–æ–¥–µ *onClick* –æ–±—Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞:

```kotlin
    override fun onClick(view: View) {
        val person: Person = view.tag as Person // –ü–æ–ª—É—á–∞–µ–º –∏–∑ —Ç—ç–≥–∞ —á–µ–ª–æ–≤–µ–∫–∞

        when (view.id) {
            R.id.more -> showPopupMenu(view)
            R.id.likedImageView -> personActionListener.onPersonLike(person)
            else -> personActionListener.onPersonGetId(person)
        }
    }
```

–ù–∞ —ç—Ç–æ–º –Ω–∞—à –∞–¥–∞–ø—Ç–µ—Ä –≥–æ—Ç–æ–≤. –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥–µ–º –≤ MainActivity –∏, –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞—à–µ–≥–æ –∞–¥–∞–ø—Ç–µ—Ä–∞, –ø–µ—Ä–µ–¥–∞–¥–∏–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:

```kotlin
adapter = PersonAdapter(object : PersonActionListener { // –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞
   override fun onPersonGetId(person: Person) =
      Toast.makeText(this@MainActivity, "Persons ID: ${person.id}", Toast.LENGTH_SHORT).show()

   override fun onPersonLike(person: Person) = personService.likePerson(person)

   override fun onPersonRemove(person: Person) = personService.removePerson(person)

   override fun onPersonMove(person: Person, moveBy: Int) = personService.movePerson(person, moveBy)

})
```

–¢–∞–∫–∂–µ –¥–æ–±–∞–≤–∏–º —Å–ª—É—à–∞—Ç–µ–ª—è –≤ MainActivity, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–∏–µ –≤ PersonService:

```kotlin
private val listener: PersonListener = {adapter.data = it}
```

–ò –≤ –º–µ—Ç–æ–¥–µ onCreate –¥–æ–±–∞–≤–∏–º —ç—Ç–æ–≥–æ —Å–ª—É—à–∞—Ç–µ–ª—è:

```kotlin
personService.addListener(listener)
```

–ù–∞ —ç—Ç–æ–º –Ω–∞—à–∞ —Ä–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞. –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–µ–∫—Ç –∏ —Å–º–æ—Ç—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

<p align="center">
 <img alt="GIF" src="https://github.com/coder-chekunkov/RecyclerView-Article/blob/main/wiki_images/003.gif" width="220"/> <br/>
</p>

–ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –æ—Å–Ω–æ–≤—ã RecyclerView. –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ —ç—Ç–æ –¥–∞–ª–µ–∫–æ –Ω–µ –≤—Å–µ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ—Ç –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç. –í—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å DiffUtil, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫, ItemDecorator, –¥–ª—è –¥–µ–∫–æ—Ä–∞ –Ω–∞—à–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ —Ç.–¥. <br/>
[–°—Å—ã–ª–∫–∞](https://habr.com/ru/sandbox/181814/) –Ω–∞ —Å—Ç–∞—Ç—å—é –Ω–∞ Habr.

---

üèÜ –Ø –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ –¥–∞–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ–º–æ–≥–ª–∞ –í–∞–º. <br/>
üìß –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π - —Å–≤—è–∂–∏—Ç–µ—Å—å —Å–æ –º–Ω–æ–π. <br/>
ü§ù –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª–∏—Å—å –¥–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–æ–π.
